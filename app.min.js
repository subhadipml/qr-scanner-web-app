function setupLiveReader(e){var t=$('<button class="uk-button uk-button-primary uk-width-1-1" onclick="stopBarcodeReader()">Close</button>'),o=document.createElement("div");o.style.position="absolute",o.style.zIndex="999",o.style.width="100%",o.style.height="100%",o.style.left="0",o.style.top="0",o.style.background="#474C55",o.id="barcode-reader";var a=document.createElement("canvas"),n=document.createElement("video"),d=a.getContext("2d");a.style.position="absolute",o.appendChild(t[0]),o.appendChild(a),document.body.appendChild(o);const i={audio:!1,video:{facingMode:"environment"}};navigator.mediaDevices.getUserMedia(i).then(function(t){window.currentStream=t.getTracks()[0],n.width=320,BarcodeScanner.init(),BarcodeScanner.streamCallback=function(t){console.log("barcode detected, stream will stop"),e.value=t[0].Value,BarcodeScanner.StopStreamDecode(),stopBarcodeReader()},n.setAttribute("autoplay",""),n.setAttribute("playsinline",""),n.setAttribute("style","width: 100%"),n.srcObject=t,o.appendChild(n),n.onloadedmetadata=function(e){var t={x:50,y:20,width:200,height:30},o=n.getBoundingClientRect();a.style.height=o.height+"px",a.style.width=o.width+"px",a.style.top=o.top+"px",a.style.left=o.left+"px";const i="rgba(71, 76, 85, .9)";d.fillStyle=i,d.fillRect(0,0,o.width,o.height),d.clearRect(t.x,t.y,t.width,t.height),d.strokeStyle="#ff671f",d.strokeRect(t.x,t.y,t.width,t.height),n.play(),BarcodeScanner.DecodeStream(n)}}).catch(function(e){console.log(e)})}function stopBarcodeReader(){var e=document.getElementById("barcode-reader");document.body.removeChild(e),window.currentStream.stop()}